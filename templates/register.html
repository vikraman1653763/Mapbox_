
{% extends 'lbody.html' %}

{% block title %} Add User - Nevar-Systems {% endblock %}


{% block login %}

<div class="form-group">
<form class="form " id="form">
  <div class="image-container">
  <img class='logo' src="static\images\nevarblack.png">
</div>
  <p class="title">Register </p>
  <p class="message">Signup now and get full access to our app. </p>
  <div class=" name flex input-control">
      <label>
          <input id="username" class="input" type="text" placeholder="" required="" autocomplete="username">
          <span>Firstname</span>
      </label>
      
  

      <div class=" flex input-control">
      <label>
          <input id="lastname" class="input" type="text" placeholder="" required="" autocomplete="lastname">
          <span>Lastname</span>
      </label>
      
   </div>
</div>
  <div class="flex input-control">
      <label>
          <input id="email" class="input" type="email" placeholder="" required="" autocomplete="email">
          <span>Email</span>
      </label>
      
  </div>

  <div class="flex input-control">
      <label>
          <input id="password" class="input" type="password" placeholder="" required="" autocomplete="password1">
          <span>Password</span>
      </label>
      
  </div>

  <div class="flex input-control">
      <label>
          <input id="password2" class="input" type="password" placeholder="" required="" autocomplete="password2">
          <span>Confirm password</span>
      </label>
      
  </div>
<div class="signin-container">
  <button id="sign" class="button" type="button" onclick="sendOTP()">Sign Up</button>
</div>



 
  
</form>
</div>
<script src="{{ url_for('static', filename='js/form.js') }}"></script>
<script>

    //otp.js//
function sendOTP() {
    const { isValid, emailValue,usernameValue } = validateInputs();
    
    if (!isValid) {
        return;
    }

    const otpValue = Math.floor(Math.random() * 1000000); // Generate and set OTP value

    let emailbody = `
        <h2>Your OTP is </h2><h1>${otpValue}</h1>
    `;

    // Store OTP value in localStorage
    localStorage.setItem('otpValue', otpValue);

    Email.send({
        SecureToken: "5fcffd7d-0f66-480e-9fcc-bddfcee79d28",
        To: emailValue,
        From: "vikraman1653763@gmail.com",
        Subject: "this is one time password. please dont share it with others.",
        Body: emailbody
    }).then(
        message => {
            if (message === "OK") {
                alert("OTP sent to your email " + emailValue);
                window.location.href = 'otp';
            }
        }
    ).catch(error => {
        console.error("Error sending email:", error);
    });
}

const otpValue = localStorage.getItem('otpValue');



</script>
{% endblock %}